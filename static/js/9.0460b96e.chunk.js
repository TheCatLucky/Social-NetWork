(this["webpackJsonplearn-project"]=this["webpackJsonplearn-project"]||[]).push([[9],{501:function(e,t,n){e.exports={img:"ChatPage_img__1xyvp",messages:"ChatPage_messages__3_KrT"}},504:function(e,t,n){"use strict";n.r(t);var s=n(56),c=n(63),r=n(0),a=n(501),i=n.n(a),u=n(7),o=function(){var e=Object(r.useState)(null),t=Object(c.a)(e,2),n=t[0],s=t[1];return Object(r.useEffect)((function(){var e,t=function(){console.log("closed"),setTimeout(n,3e3)};function n(){var n;null===(n=e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"))||void 0===n||n.addEventListener("close",t),s(e)}return n(),function(){e.removeEventListener("close",t),e.close()}}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(j,{ws:n}),Object(u.jsx)(b,{ws:n})]})},j=function(e){var t=e.ws,n=Object(r.useState)([]),a=Object(c.a)(n,2),o=a[0],j=a[1];return Object(r.useEffect)((function(){var e=function(e){var t=JSON.parse(e.data);j((function(e){return[].concat(Object(s.a)(e),Object(s.a)(t))}))};return null===t||void 0===t||t.addEventListener("message",e),function(){null===t||void 0===t||t.removeEventListener("message",e)}}),[t]),Object(u.jsx)("div",{className:i.a.messages,children:o.map((function(e,t){return Object(u.jsx)(l,{messages:e},t)}))})},l=function(e){var t=e.messages;return Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{src:t.photo,alt:"user",className:i.a.img}),Object(u.jsx)("b",{children:t.userName}),Object(u.jsx)("br",{}),t.message,Object(u.jsx)("hr",{})]})},b=function(e){var t=e.ws,n=Object(r.useState)(""),s=Object(c.a)(n,2),a=s[0],i=s[1],o=Object(r.useState)("pending"),j=Object(c.a)(o,2),l=j[0],b=j[1];Object(r.useEffect)((function(){var e=function(){b("ready")};return null===t||void 0===t||t.addEventListener("open",e),function(){null===t||void 0===t||t.removeEventListener("open",e)}}),[t]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{onChange:function(e){i(e.currentTarget.value)},value:a}),Object(u.jsx)("button",{disabled:null===t||"ready"!==l,onClick:function(){a&&(null===t||void 0===t||t.send(a),i(""))},children:"Send"})]})};t.default=function(){return Object(u.jsxs)("div",{children:[" ",Object(u.jsx)("h1",{children:"Chat"}),Object(u.jsx)(o,{})]})}}}]);
//# sourceMappingURL=9.0460b96e.chunk.js.map