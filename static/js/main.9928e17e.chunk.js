(this["webpackJsonplearn-project"]=this["webpackJsonplearn-project"]||[]).push([[1],{10:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return i}));var a=n(74),r=a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"c1f0b7d1-dc16-41bd-b130-0fd123149d60"}}),s={getUsers:function(t,e){return r.get("users?page=".concat(t,"&count=").concat(e)).then((function(t){return console.log(t.status,"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"),t.data}))},followUser:function(t){return r.post("follow/".concat(t)).then((function(t){return console.log(t.status,"follow"),t.data}))},unfollowUser:function(t){return r.delete("follow/".concat(t)).then((function(t){return console.log(t.status,"unfollow"),t.data}))},getProfile:function(t){return i.getProfile(t)}},c={getMe:function(){return r.get("auth/me").then((function(t){return console.log(t.status,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),t.data}))},logIn:function(t,e,n){return r.post("auth/login",{email:t,password:e,rememberMe:n}).then((function(t){return console.log(t.status,"\u041b\u043e\u0433\u0438\u043d\u0438\u0437\u0430\u0446\u0438\u044f"),console.log(t.data),t.data}))},logOut:function(){return r.delete("auth/login").then((function(t){return console.log(t.status,"\u0420\u0430\u0437\u043b\u043e\u0433\u0438\u043d\u0435\u043d"),console.log(t.data),t.data}))}},i={getProfile:function(t){return r.get("profile/".concat(t)).then((function(t){return console.log(t.status,"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044f"),t.data}))},getStatus:function(t){return r.get("/profile/status/".concat(t)).then((function(t){return console.log(t.status,"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430"),t.data}))},updateStatus:function(t){return r.put("/profile/status",{status:t}).then((function(t){return console.log(t.status,"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430"),t.data}))}}},20:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return f}));var a=n(3),r=n(42),s=n(10),c="SET_USER_DATA",i={userId:null,email:null,login:null,isAuth:!1},o=function(t,e,n,a){return{type:c,payload:{userId:t,email:e,login:n,isAuth:a}}},u=function(){return function(t){return s.a.getMe().then((function(e){if(0===e.resultCode){var n=e.data,a=n.id,r=n.login,s=n.email;t(o(a,s,r,!0))}}))}},l=function(t,e,n){return function(a){s.a.logIn(t,e,n).then((function(t){if(0===t.resultCode)a(u());else{var e=t.messages.length>0?t.messages[0]:"Some Error";a(Object(r.b)("login",{_error:e}))}}))}},f=function(){return function(t){s.a.logOut().then((function(e){0===e.resultCode&&t(o(null,null,null,!1))}))}};e.b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments.length>1?arguments[1]:void 0;return e.type===c?Object(a.a)(Object(a.a)({},t),e.payload):t}},215:function(t,e,n){},217:function(t,e,n){"use strict";n.r(e);var a=n(26),r=n(72),s=n(77),c=n(3),i=n(20),o="SET_INITIALIZE",u={initialized:!1},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,e=arguments.length>1?arguments[1]:void 0;return e.type===o?Object(c.a)(Object(c.a)({},t),{},{initialized:!0}):t},f=n(66),d=n(52),j=n(73),b=n(75),g=Object(a.combineReducers)({profilePage:d.c,dialogsPage:f.a,usersPage:j.a,auth:i.b,form:r.a,app:l}),O=Object(a.createStore)(g,Object(b.composeWithDevTools)(Object(a.applyMiddleware)(s.a)));window.store=O;var p=O,h=n(0),m=n.n(h),v=n(40),x=n.n(v),_=n(28),y=n(29),S=n(31),w=n(30),N=n(18),E=n(11),P=n(4),A=(n(215),n(48)),D=n(41),T=n.n(D),U=n(2),I=function(t){return Object(U.jsx)("header",{className:T.a.header,children:Object(U.jsx)("div",{className:T.a.login,children:t.isAuth?Object(U.jsxs)("div",{children:[t.login," - ",Object(U.jsx)("button",{onClick:t.logOut,children:"\u0412\u044b\u0439\u0442\u0438"})]}):Object(U.jsx)(E.b,{to:"/login",className:T.a.button,children:"\u0412\u043e\u0439\u0442\u0438"})})})},C=function(t){Object(S.a)(n,t);var e=Object(w.a)(n);function n(){return Object(_.a)(this,n),e.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(I,Object(c.a)({},this.props))})}}]),n}(m.a.Component),L=Object(N.b)((function(t){return{isAuth:t.auth.isAuth,login:t.auth.login}}),{logOut:i.d})(C),R=n(8),z=n.n(R),G=function(t){return Object(U.jsx)("nav",{className:z.a.nav,children:Object(U.jsxs)("ul",{children:[Object(U.jsx)("li",{className:z.a.item,children:Object(U.jsx)(E.b,{to:"/profile",className:function(t){return t.isActive?"".concat(z.a.active):""},children:"Profile"})}),Object(U.jsx)("li",{className:z.a.item,children:Object(U.jsx)(E.b,{to:"/dialogs",className:function(t){return t.isActive?"".concat(z.a.active):""},children:"Messages"})}),Object(U.jsx)("li",{className:z.a.item,children:Object(U.jsx)(E.b,{to:"/users",className:function(t){return t.isActive?"".concat(z.a.active):""},children:"Users"})}),Object(U.jsx)("li",{className:z.a.item,children:Object(U.jsx)(E.b,{to:"/news",className:function(t){return t.isActive?"".concat(z.a.active):""},children:"News"})}),Object(U.jsx)("li",{className:z.a.item,children:Object(U.jsx)(E.b,{to:"/music",className:function(t){return t.isActive?"".concat(z.a.active):""},children:"Music"})}),Object(U.jsx)("li",{className:z.a.item,children:Object(U.jsx)(E.b,{to:"/settings",className:function(t){return t.isActive?"".concat(z.a.active):""},children:"Settings"})})]})})},M=m.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,297))})),F=m.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,295))})),k=m.a.lazy((function(){return n.e(7).then(n.bind(null,296))})),H=m.a.lazy((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,298))})),K=function(t){Object(S.a)(n,t);var e=Object(w.a)(n);function n(){return Object(_.a)(this,n),e.apply(this,arguments)}return Object(y.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(U.jsx)(E.a,{children:Object(U.jsxs)("div",{className:"app-wrapper",children:[Object(U.jsx)(L,{}),Object(U.jsx)(G,{}),Object(U.jsx)("div",{className:"app-wrapper-content",children:Object(U.jsx)(h.Suspense,{fallback:Object(U.jsx)(A.a,{}),children:Object(U.jsxs)(P.d,{children:[Object(U.jsx)(P.b,{path:"/dialogs/*",element:Object(U.jsx)(M,{store:this.props.store})}),Object(U.jsx)(P.b,{path:"/profile/*",element:Object(U.jsx)(F,{store:this.props.store})}),Object(U.jsx)(P.b,{path:"/users",element:Object(U.jsx)(k,{store:this.props.store})}),Object(U.jsx)(P.b,{path:"/login",element:Object(U.jsx)(H,{store:this.props.store})})]})})})]})}):Object(U.jsx)(A.a,{})}}]),n}(m.a.Component),W=Object(N.b)((function(t){return{initialized:t.app.initialized}}),{initializeApp:function(){return function(t){t(Object(i.a)()).then((function(){t({type:o})}))}}})(K);x.a.render(Object(U.jsx)(N.a,{store:p,children:Object(U.jsx)(W,{})}),document.getElementById("root"))},41:function(t,e,n){t.exports={header:"Header_header__3t12R",login:"Header_login__3ZMp3",button:"Header_button__Y932b",img:"Header_img__216RY"}},48:function(t,e,n){"use strict";var a=n.p+"static/media/three-dots.4837ff4e.svg",r=(n(0),n(2));e.a=function(t){return Object(r.jsx)("img",{src:a,alt:"preloader"})}},52:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"f",(function(){return j})),n.d(e,"b",(function(){return g})),n.d(e,"d",(function(){return O})),n.d(e,"e",(function(){return p})),n.d(e,"g",(function(){return h}));var a=n(17),r=n(3),s=n(10),c="ADD-POST",i="REMOVE-POST",o="SET_USER_PROFILE",u="SET_STATUS",l="CHANGE_STATUS",f={postsData:[{id:1,message:"Hello",name:"Kira",age:"13"},{id:2,message:"How are you?",name:"Line",age:52},{id:3,message:"Are you fine?",name:"Lina",age:12},{id:4,message:"How old are you?",name:"Kostya",age:53},{id:5,message:"Glad to see you",name:"Dasha",age:36}],profile:null,status:""},d=function(t){return{type:c,postText:t}},j=function(t){return{type:i,id:t}},b=function(t){return{type:u,status:t}},g=function(t){return{type:l,status:t}},O=function(t){return function(e){s.c.getProfile(t).then((function(t){e({type:o,profile:t})}))}},p=function(t){return function(e){s.b.getStatus(t).then((function(t){e(b(t))}))}},h=function(t){return function(e){s.b.updateStatus(t).then((function(n){0===n.resultCode&&e(b(t))}))}};e.c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c:if(void 0===e.postText)return t;var n={id:t.postsData.length+1,message:e.postText,name:"Masha",age:20};return Object(r.a)(Object(r.a)({},t),{},{postsData:[].concat(Object(a.a)(t.postsData),[n])});case i:return Object(r.a)(Object(r.a)({},t),{},{postsData:t.postsData.filter((function(t){return t.id!==e.id}))});case o:return Object(r.a)(Object(r.a)({},t),{},{profile:e.profile});case u:case l:return Object(r.a)(Object(r.a)({},t),{},{status:e.status});default:return t}}},66:function(t,e,n){"use strict";n.d(e,"b",(function(){return u}));var a=n(17),r=n(3),s=n(57),c="SEND-MESSAGE",i=function(){return Object(s.a)()},o={dialogsData:[{id:i(),name:"\u041f\u0435\u0442\u044f"},{id:i(),name:"\u041c\u0430\u0448\u0430"},{id:i(),name:"\u041a\u0430\u0442\u044f"},{id:i(),name:"\u0412\u0430\u043d\u044f"},{id:i(),name:"\u041a\u0438\u0440\u0430"}],messagesData:[{id:i(),message:"\u041a\u0443!"},{id:i(),message:"\u041a\u0430\u043a \u0434\u0435\u043b\u0430?"},{id:i(),message:"\u0412\u0441\u0435 \u0433\u0443\u0434"}]},u=function(t){return{type:c,message:t}};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments.length>1?arguments[1]:void 0;if(e.type===c){if(void 0===e.message)return t;var n={id:i(),message:e.message};return Object(r.a)(Object(r.a)({},t),{},{messagesData:[].concat(Object(a.a)(t.messagesData),[n])})}return t}},73:function(t,e,n){"use strict";n.d(e,"c",(function(){return m})),n.d(e,"b",(function(){return x})),n.d(e,"d",(function(){return _}));var a=n(17),r=n(3),s=n(10),c=function(t,e,n,a){return t.map((function(t){return t[n]===e?Object(r.a)(Object(r.a)({},t),a):t}))},i="FOLLOW",o="UNFOLLOW",u="SET_USERS",l="SET_CURRENT_PAGE",f="SET_TOTAL_USERS_COUNT",d="TOGGLE_IS_FETCHING",j="TOGGLE_FOLLOWING_PROGRESS",b={usersData:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingProgress:[]},g=function(t){return{type:i,userId:t}},O=function(t){return{type:o,userId:t}},p=function(t){return{type:d,isFetching:t}},h=function(t,e){return{type:j,followingProgress:t,userId:e}},m=function(t,e){return function(n){n(p(!0)),n(function(t){return{type:l,currentPage:t}}(t)),s.c.getUsers(t,e).then((function(t){var e,a;n((e=t.items,{type:u,usersData:e})),n(p(!1)),n((a=t.totalCount,{type:f,totalUsersCount:a}))}))}},v=function(t,e,n,a){t(h(!0,e)),n(e).then((function(n){0===n.resultCode&&t(a(e)),t(h(!1,e))}))},x=function(t){return function(e){var n=s.c.followUser;v(e,t,n,g)}},_=function(t){return function(e){var n=s.c.unfollowUser;v(e,t,n,O)}};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case i:return Object(r.a)(Object(r.a)({},t),{},{usersData:c(t.usersData,e.userId,"id",{followed:!0})});case o:return Object(r.a)(Object(r.a)({},t),{},{usersData:c(t.usersData,e.userId,"id",{followed:!1})});case u:return Object(r.a)(Object(r.a)({},t),{},{usersData:Object(a.a)(e.usersData)});case l:return Object(r.a)(Object(r.a)({},t),{},{currentPage:e.currentPage});case f:return Object(r.a)(Object(r.a)({},t),{},{totalUsersCount:e.totalUsersCount/100});case d:return Object(r.a)(Object(r.a)({},t),{},{isFetching:e.isFetching});case j:return Object(r.a)(Object(r.a)({},t),{},{followingProgress:e.followingProgress?[].concat(Object(a.a)(t.followingProgress),[e.userId]):t.followingProgress.filter((function(t){return t!==e.userId}))});default:return t}}},8:function(t,e,n){t.exports={nav:"Navbar_nav__2h7dK",item:"Navbar_item__A53DK",active:"Navbar_active__3kUQx"}}},[[217,2,3]]]);
//# sourceMappingURL=main.9928e17e.chunk.js.map